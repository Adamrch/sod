{
  "type": "TypeAPL",
  "prepullActions": [
    {"action":{"activateAura":{"auraId":{"spellId":407988}}},"doAtValue":{"const":{"val":"-8s"}},"hide":true}
  ],
  "priorityList": [
    {"action":{"condition":{"not":{"val":{"auraIsActive":{"auraId":{"spellId":768}}}}},"castSpell":{"spellId":{"spellId":768}}}},
    {"action":{"condition":{"not":{"val":{"auraIsActive":{"auraId":{"spellId":407988}}}}},"castSpell":{"spellId":{"spellId":407988}}}},
    {"action":{"condition":{"and":{"vals":[{"cmp":{"op":"OpLe","lhs":{"math":{"op":"OpAdd","lhs":{"currentMana":{}},"rhs":{"const":{"val":"1500.0"}}}},"rhs":{"math":{"op":"OpDiv","lhs":{"currentMana":{}},"rhs":{"currentManaPercent":{}}}}}},{"cmp":{"op":"OpLe","lhs":{"currentEnergy":{}},"rhs":{"math":{"op":"OpSub","lhs":{"spellCurrentCost":{"spellId":{"spellId":9830,"rank":5}}},"rhs":{"const":{"val":"20.2"}}}}}},{"cmp":{"op":"OpGe","lhs":{"currentMana":{}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":768}}}}},{"not":{"val":{"auraIsActive":{"auraId":{"spellId":417141}}}}},{"auraIsKnown":{"auraId":{"spellId":17061,"rank":5}}},{"gcdIsReady":{}}]}},"castSpell":{"spellId":{"itemId":12662}}}},
    {"action":{"condition":{"and":{"vals":[{"cmp":{"op":"OpLe","lhs":{"currentMana":{}},"rhs":{"math":{"op":"OpMul","lhs":{"const":{"val":"2.0"}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":768}}}}}}},{"cmp":{"op":"OpLe","lhs":{"currentEnergy":{}},"rhs":{"math":{"op":"OpSub","lhs":{"spellCurrentCost":{"spellId":{"spellId":9830,"rank":5}}},"rhs":{"const":{"val":"20.2"}}}}}},{"cmp":{"op":"OpGe","lhs":{"currentMana":{}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":768}}}}},{"not":{"val":{"auraIsActive":{"auraId":{"spellId":417141}}}}},{"auraIsKnown":{"auraId":{"spellId":17061,"rank":5}}},{"gcdIsReady":{}},{"not":{"val":{"and":{"vals":[{"spellIsKnown":{"spellId":{"itemId":12662}}},{"spellIsReady":{"spellId":{"itemId":12662}}}]}}}}]}},"castSpell":{"spellId":{"otherId":"OtherActionPotion"}}}},
    {"action":{"condition":{"and":{"vals":[{"cmp":{"op":"OpLe","lhs":{"currentManaPercent":{}},"rhs":{"const":{"val":"40%"}}}},{"cmp":{"op":"OpLe","lhs":{"currentEnergy":{}},"rhs":{"math":{"op":"OpSub","lhs":{"spellCurrentCost":{"spellId":{"spellId":9830,"rank":5}}},"rhs":{"const":{"val":"20.2"}}}}}},{"cmp":{"op":"OpGt","lhs":{"currentMana":{}},"rhs":{"math":{"op":"OpAdd","lhs":{"spellCurrentCost":{"spellId":{"spellId":29166}}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":768}}}}}}},{"not":{"val":{"auraIsActive":{"auraId":{"spellId":417141}}}}},{"auraIsKnown":{"auraId":{"spellId":17061,"rank":5}}},{"not":{"val":{"or":{"vals":[{"and":{"vals":[{"spellIsKnown":{"spellId":{"itemId":12662}}},{"spellIsReady":{"spellId":{"itemId":12662}}}]}},{"and":{"vals":[{"spellIsKnown":{"spellId":{"otherId":"OtherActionPotion"}}},{"spellIsReady":{"spellId":{"otherId":"OtherActionPotion"}}}]}}]}}}}]}},"castSpell":{"spellId":{"spellId":29166}}}},
    {"action":{"condition":{"and":{"vals":[{"or":{"vals":[{"and":{"vals":[{"not":{"val":{"auraIsActive":{"auraId":{"spellId":417141}}}}},{"cmp":{"op":"OpLt","lhs":{"currentEnergy":{}},"rhs":{"math":{"op":"OpSub","lhs":{"spellCurrentCost":{"spellId":{"spellId":9830,"rank":5}}},"rhs":{"const":{"val":"20.2"}}}}}}]}},{"and":{"vals":[{"and":{"vals":[{"auraIsActive":{"auraId":{"spellId":417141}}},{"spellIsKnown":{"spellId":{"spellId":417141}}}]}},{"cmp":{"op":"OpLt","lhs":{"currentEnergy":{}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":9830,"rank":5}}}}}]}}]}},{"cmp":{"op":"OpGe","lhs":{"currentMana":{}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":768}}}}},{"auraIsKnown":{"auraId":{"spellId":17061,"rank":5}}}]}},"castSpell":{"spellId":{"spellId":768}}}},
    {"action":{"condition":{"and":{"vals":[{"not":{"val":{"auraIsActive":{"auraId":{"spellId":417045}}}}},{"or":{"vals":[{"not":{"val":{"energyThreshold":{"threshold":-59}}}},{"and":{"vals":[{"cmp":{"op":"OpGt","lhs":{"timeToEnergyTick":{}},"rhs":{"gcdTimeToReady":{}}}},{"not":{"val":{"energyThreshold":{"threshold":-39}}}}]}}]}}]}},"castSpell":{"spellId":{"spellId":417045}}}},
    {"action":{"condition":{"or":{"vals":[{"not":{"val":{"energyThreshold":{"threshold":-79}}}},{"and":{"vals":[{"cmp":{"op":"OpGt","lhs":{"timeToEnergyTick":{}},"rhs":{"gcdTimeToReady":{}}}},{"not":{"val":{"energyThreshold":{"threshold":-59}}}}]}}]}},"castSpell":{"spellId":{"spellId":417045}}}},
    {"action":{"condition":{"auraIsActive":{"auraId":{"spellId":417045}}},"autocastOtherCooldowns":{}}},
    {"action":{"condition":{"not":{"val":{"auraIsActive":{"sourceUnit":{"type":"CurrentTarget"},"auraId":{"spellId":409828}}}}},"castSpell":{"spellId":{"spellId":409828}}}},
    {"action":{"condition":{"and":{"vals":[{"auraIsKnown":{"auraId":{"spellId":16870}}},{"auraIsActiveWithReactionTime":{"auraId":{"spellId":16870}}}]}},"castSpell":{"spellId":{"spellId":9830,"rank":5}}}},
    {"action":{"condition":{"and":{"vals":[{"cmp":{"op":"OpEq","lhs":{"currentComboPoints":{}},"rhs":{"const":{"val":"5"}}}},{"or":{"vals":[{"cmp":{"op":"OpGe","lhs":{"auraRemainingTime":{"auraId":{"spellId":407988}}},"rhs":{"const":{"val":"8.0"}}}},{"auraIsKnown":{"auraId":{"spellId":455873}}}]}},{"cmp":{"op":"OpGe","lhs":{"remainingTime":{}},"rhs":{"const":{"val":"10"}}}},{"not":{"val":{"dotIsActive":{"spellId":{"spellId":9896,"rank":6}}}}}]}},"castSpell":{"spellId":{"spellId":9896,"rank":6}}}},
    {"action":{"condition":{"not":{"val":{"dotIsActive":{"spellId":{"spellId":9904,"rank":4}}}}},"castSpell":{"spellId":{"spellId":9904,"rank":4}}}},
    {"action":{"condition":{"and":{"vals":[{"cmp":{"op":"OpGe","lhs":{"currentMana":{}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":768}}}}},{"auraIsKnown":{"auraId":{"spellId":17061,"rank":5}}},{"cmp":{"op":"OpLt","lhs":{"timeToEnergyTick":{}},"rhs":{"const":{"val":"1.00"}}}},{"cmp":{"op":"OpGe","lhs":{"math":{"op":"OpAdd","lhs":{"currentEnergy":{}},"rhs":{"const":{"val":"20.2"}}}},"rhs":{"math":{"op":"OpAdd","lhs":{"spellCurrentCost":{"spellId":{"spellId":409828}}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":409828}}}}}}},{"cmp":{"op":"OpLt","lhs":{"math":{"op":"OpAdd","lhs":{"currentEnergy":{}},"rhs":{"const":{"val":"20.2"}}}},"rhs":{"math":{"op":"OpAdd","lhs":{"spellCurrentCost":{"spellId":{"spellId":409828}}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":9830,"rank":5}}}}}}}]}},"castSpell":{"spellId":{"spellId":409828}}}},
    {"action":{"condition":{"and":{"vals":[{"auraIsKnown":{"auraId":{"spellId":455873}}},{"cmp":{"op":"OpEq","lhs":{"currentComboPoints":{}},"rhs":{"const":{"val":"5.0"}}}},{"auraIsActive":{"auraId":{"spellId":407988}}},{"not":{"val":{"auraIsActive":{"auraId":{"spellId":417141}}}}},{"cmp":{"op":"OpLe","lhs":{"currentEnergy":{}},"rhs":{"const":{"val":"53.0"}}}}]}},"castSpell":{"spellId":{"spellId":31018}}}},
    {"action":{"castSpell":{"spellId":{"spellId":9830,"rank":5}}}},
    {"action":{"condition":{"and":{"vals":[{"cmp":{"op":"OpGe","lhs":{"currentMana":{}},"rhs":{"spellCurrentCost":{"spellId":{"spellId":768}}}}},{"auraIsKnown":{"auraId":{"spellId":17061,"rank":5}}},{"cmp":{"op":"OpGt","lhs":{"timeToEnergyTick":{}},"rhs":{"const":{"val":"1.02"}}}}]}},"castSpell":{"spellId":{"spellId":409828}}}}
  ]
}
